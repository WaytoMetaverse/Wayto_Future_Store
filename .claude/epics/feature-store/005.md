---
name: Unreal Engine C++ Core Classes Implementation
status: open
created: 2025-09-21T13:40:36Z
updated: 2025-09-21T13:40:36Z
github: [Will be updated when synced to GitHub]
depends_on: [001]
parallel: true
conflicts_with: []
---

# Task: Unreal Engine C++ Core Classes Implementation

## Description
Implement the core C++ classes for Unreal Engine that handle JSON layout parsing, procedural wall generation, material application, and furniture placement. This forms the rendering backend that converts 2D layouts into 3D scenes.

## Acceptance Criteria
- [ ] `ALayoutProcessor` class for JSON parsing and scene coordination
- [ ] `UWallGenerator` class for procedural wall mesh generation with openings
- [ ] `UMaterialManager` class for dynamic material instance creation
- [ ] `UFurnitureSpawner` class for asset loading and precise positioning
- [ ] `ACameraController` class for panoramic and perspective camera management
- [ ] JSON validation and error handling with detailed logging
- [ ] Procedural floor and ceiling generation from wall outlines
- [ ] Boolean operations for door and window openings in walls
- [ ] Material slot mapping and dynamic material instance application

## Technical Details
**Core Class Architecture:**
```cpp
class INTERIORDESIGN_API ALayoutProcessor : public AActor
{
    GENERATED_BODY()
public:
    UFUNCTION(CallInEditor = true)
    bool ProcessLayoutFromJSON(const FString& JsonString);

private:
    UPROPERTY(VisibleAnywhere)
    UWallGenerator* WallGenerator;

    UPROPERTY(VisibleAnywhere)
    UMaterialManager* MaterialManager;

    UPROPERTY(VisibleAnywhere)
    UFurnitureSpawner* FurnitureSpawner;
};
```

**Procedural Generation:**
- `UWallGenerator` uses `UProceduralMeshComponent` for wall extrusion
- Boolean CSG operations for creating door/window openings
- Automatic UV mapping for consistent material application
- Collision mesh generation for accurate furniture placement

**Material System:**
- Dynamic `UMaterialInstance` creation from material database
- Texture streaming and memory management for large scenes
- Material slot validation and error handling
- Support for PBR material workflows with normal/roughness maps

**Asset Management:**
- Asynchronous furniture asset loading with progress tracking
- LOD management for performance optimization
- Asset validation and error recovery mechanisms
- Memory management for large furniture catalogs

## Dependencies
- [ ] Task 001: Unreal C++ project setup and JSON schema definitions
- [ ] Unreal Engine ProceduralMeshComponent and CSG libraries
- [ ] Material texture assets in Unreal-compatible formats
- [ ] Furniture 3D models as Unreal Static Mesh assets

## Effort Estimate
- Size: XL
- Hours: 28-36 hours
- Parallel: true (can develop alongside frontend/backend)

## Definition of Done
- [ ] All C++ classes compile without errors or warnings
- [ ] JSON layout processing creates accurate 3D geometry
- [ ] Materials apply correctly to generated wall surfaces
- [ ] Furniture placement matches 2D layout coordinates exactly
- [ ] Error handling provides clear feedback for invalid inputs
- [ ] Memory usage optimized for complex scenes (50+ objects)
- [ ] Unit tests cover all core functionality
- [ ] Code follows Unreal Engine coding standards